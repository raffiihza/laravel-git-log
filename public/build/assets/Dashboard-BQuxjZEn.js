import{u as y,r as a,j as e,H as w,L as n}from"./app-DOhTflau.js";import{d as L,l as k}from"./index-DPfDGp1o.js";/* empty css            */function G({repositories:c}){const{auth:u}=y().props,[t,j]=a.useState(null),[b,f]=a.useState(""),[d,m]=a.useState(!1),[x,h]=a.useState(""),[l,N]=a.useState("simple"),o=async(s,r=!1)=>{m(!0),h("");try{const i=r?`/api/git-log/${s.id}/detailed`:`/api/git-log/${s.id}`,g=await fetch(i),p=await g.json();if(!g.ok)throw new Error(p.error||"Failed to fetch git log");f(p.git_log),j(s)}catch(i){h(i instanceof Error?i.message:"An error occurred")}finally{m(!1)}},v=()=>{t&&o(t,l==="detailed")};return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Git Log Dashboard"}),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Git Log Dashboard"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"View git logs from your repositories"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:u.user?e.jsxs(e.Fragment,{children:[e.jsx(n,{href:L(),className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700",children:"Admin Dashboard"}),e.jsx(n,{href:"/repositories",className:"bg-green-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-green-700",children:"Manage Repositories"})]}):e.jsx(n,{href:k(),className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700",children:"Admin Login"})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Repositories"}),c.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No repositories configured yet."}):e.jsx("div",{className:"space-y-2",children:c.map(s=>e.jsxs("div",{className:`p-3 border rounded-md cursor-pointer transition-colors ${t?.id===s.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>o(s,l==="detailed"),children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),s.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.description}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:s.git_log_path})]},s.id))})]})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:t?`Git Log - ${t.name}`:"Select a Repository"}),t&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:l,onChange:s=>{const r=s.target.value;N(r),o(t,r==="detailed")},className:"text-sm border-gray-300 rounded-md",children:[e.jsx("option",{value:"simple",children:"Simple View"}),e.jsx("option",{value:"detailed",children:"Detailed View"})]}),e.jsx("button",{onClick:v,disabled:d,className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 disabled:opacity-50",children:d?"Refreshing...":"Refresh"})]})]}),x&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:x}),d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t?e.jsx("div",{className:"bg-gray-900 rounded-md p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm whitespace-pre-wrap font-mono",children:b||"No git log data available"})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No repository selected"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Choose a repository to view its git log"})]})]})})})]})})]})]})}export{G as default};
