import{r as i,j as e,H as k,L as p,b as C}from"./app-C4FLfKFN.js";/* empty css            */function $({projectLog:s,logFiles:x}){const[n,y]=i.useState(null),[r,b]=i.useState(null),[l,h]=i.useState(!1),[d,g]=i.useState(""),[c,N]=i.useState(""),u=async t=>{h(!0),g(""),y(t);try{const a=await fetch(`/api/project-logs/${s.id}/content?file=${encodeURIComponent(t)}`),m=await a.json();if(!a.ok)throw new Error(m.error||"Gagal membaca file log");b(m)}catch(a){g(a instanceof Error?a.message:"Terjadi kesalahan")}finally{h(!1)}},v=()=>{n&&u(n)},f=t=>{if(t===0)return"0 Bytes";const a=1024,m=["Bytes","KB","MB","GB"],j=Math.floor(Math.log(t)/Math.log(a));return parseFloat((t/Math.pow(a,j)).toFixed(2))+" "+m[j]},w=()=>{window.confirm(`Apakah Anda yakin ingin menghapus "${s.name}"?`)&&C.delete(`/project-logs/manage/${s.id}`)},o=x.filter(t=>t.name.toLowerCase().includes(c.toLowerCase()));return e.jsxs(e.Fragment,{children:[e.jsx(k,{title:s.name}),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.name}),e.jsx("span",{className:`ml-3 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.is_active?"Aktif":"Tidak Aktif"})]}),s.description&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:s.description})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(p,{href:"/project-logs/manage",className:"bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-700",children:"Kembali ke Daftar"}),e.jsx(p,{href:`/project-logs/manage/${s.id}/edit`,className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700",children:"Edit"}),e.jsx("button",{onClick:w,className:"bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-red-700",children:"Hapus"})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("div",{className:"bg-white shadow rounded-lg mb-6",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Detail Project Log"}),e.jsxs("dl",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Nama"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.name})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Path"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 break-all",children:s.log_path})]}),s.description&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Deskripsi"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.description})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx("dd",{className:"mt-1",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.is_active?"Aktif":"Tidak Aktif"})})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Dibuat"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(s.created_at).toLocaleString("id-ID")})]})]})]})}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsxs("div",{className:"px-4 py-4 border-b border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["File Log",x.length>0&&e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",o.length,"/",x.length,")"]})]})}),e.jsx("input",{type:"text",placeholder:"Cari file log...",value:c,onChange:t=>N(t.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900"})]}),e.jsx("div",{className:"p-2",children:o.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:c?"Tidak ada file yang cocok.":"Tidak ada file log ditemukan."}):e.jsx("ul",{className:"divide-y divide-gray-100 max-h-[calc(100vh-500px)] overflow-y-auto",children:o.map((t,a)=>e.jsx("li",{children:e.jsx("button",{onClick:()=>u(t.name),className:`w-full text-left px-3 py-2.5 hover:bg-gray-50 rounded-md transition-colors ${n===t.name?"bg-blue-50 border-l-4 border-blue-500":""}`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center",children:[a===0&&!c&&e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 mr-2",children:"Terbaru"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.name})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:f(t.size)})]})})})},t.name))})})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-4 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Isi Log",r&&e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["- ",r.filename]})]}),n&&e.jsxs("button",{onClick:v,disabled:l,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[e.jsx("svg",{className:`h-4 w-4 mr-1.5 ${l?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})}),e.jsxs("div",{className:"p-4",children:[l&&e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-500",children:"Memuat..."})]}),d&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("p",{className:"ml-3 text-sm text-red-700",children:d})]})}),!l&&!d&&!r&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Pilih file log dari daftar untuk melihat isinya"})]}),!l&&!d&&r&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("span",{children:["Ukuran: ",f(r.size)]}),e.jsxs("span",{children:["Terakhir diubah: ",r.modified]})]}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 overflow-auto max-h-[calc(100vh-300px)]",children:e.jsx("pre",{className:"text-sm text-green-400 whitespace-pre-wrap break-words font-mono",children:r.content||"(File kosong)"})})]})]})]})})]})})]})]})}export{$ as default};
